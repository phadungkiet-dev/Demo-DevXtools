"use client";

// =============================================================================
// Imports
// =============================================================================
import { useSidebarStore } from "@/store/use-sidebar-store";
import { cn } from "@/lib/utils";
import React from "react";

// =============================================================================
// Component
// =============================================================================
export function PageWrapper({ children }: { children: React.ReactNode }) {
  // üü¢ Hook: ‡∏î‡∏∂‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Sidebar (Client-side state)
  const { isOpen } = useSidebarStore();

  return (
    <div
      className={cn(
        // -------------------------------------------------------
        // 1. Layout Fundamentals:
        // - flex flex-col: ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Header, Main) ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á
        // - min-h-screen: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠‡πÄ‡∏™‡∏°‡∏≠
        // - w-full: **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å** ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ mx-auto ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)
        // -------------------------------------------------------
        "flex flex-col min-h-screen w-full bg-background",

        // -------------------------------------------------------
        // 2. Sidebar Transition Logic (Desktop):
        // - ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Padding-Left ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Sidebar
        // - transition-all: ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏î‡∏´‡∏î‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•
        // -------------------------------------------------------
        "transition-[padding] duration-300 ease-in-out",

        // Desktop Logic:
        // - ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î: ‡πÄ‡∏ß‡πâ‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ 72 (18rem / 288px) ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á Sidebar
        // - ‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î: ‡πÄ‡∏ß‡πâ‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ 72px (Collapsed width)
        isOpen ? "md:pl-72" : "md:pl-[72px]"

        // Note: Mobile ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á set pl ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Sidebar ‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Overlay ‡∏ó‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
      )}
    >
      {/* 3. Content Boundary:
        - flex-1: ‡∏¢‡∏∑‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
        - w-full: ‡∏¢‡∏∑‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á
        - min-w-0: **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î** ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Flexbox Blowout 
          (‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠ Code block ‡∏î‡∏±‡∏ô Layout ‡∏à‡∏ô‡∏ó‡∏∞‡∏•‡∏∏‡∏à‡∏≠) 
      */}
      <div className="flex-1 w-full min-w-0 flex flex-col">{children}</div>
    </div>
  );
}
